import{an as m,a8 as h,e as p,d as c,i as f}from"./index.988b09cd.js";import{V as l}from"./DynamicLayerView3D.999da6f2.js";import{a as u}from"./WMSLayerView.f607f90b.js";import"./vendor.c6be4c00.js";import"./index.25aa0880.js";/* empty css              */import"./qrcode.0911187d.js";/* empty css                 */import"./projectExtentUtils.237a1767.js";import"./RefreshableLayerView.c8d2ecf1.js";import"./ExportWMSImageParameters.be80fede.js";let i=class extends u(l){constructor(){super(...arguments),this.type="wms-3d"}initialize(){this.layer.supportsSpatialReference(this.view.spatialReference)||this.addResolvingPromise(Promise.reject(new m("layerview:spatial-reference-incompatible","The spatial references supported by this WMS layer are incompatible with the spatial reference of the view"))),this.updatingHandles.add(this.exportImageParameters,"version",()=>{this.updatingHandles.addPromise(this.refreshDebounced())})}createFetchPopupFeaturesQuery(r){const s=this.findExtentInfoAt(r),e=s.extent,t=new h(e[0],e[1],e[2],e[3],this._spatialReference),a=s.imageSize,o=a.width,d=a.height,n=t.width/o;return{extent:t,width:o,height:d,x:Math.round((r.x-t.xmin)/n),y:Math.round((t.ymax-r.y)/n)}}getFetchOptions(){return{timeExtent:this.timeExtent}}};p([c()],i.prototype,"suspended",void 0),i=p([f("esri.views.3d.layers.WMSLayerView3D")],i);const R=i;export{R as default};
