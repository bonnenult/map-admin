import{aP as A,cr as L,cO as R,cP as g,cs as X,cc as w,cp as Q,c3 as T,c7 as k,cj as q,cQ as P,cR as z,cS as h}from"./index.fe92decb.js";function H(s){if(!s)return null;let i=null;const m=s.spatialReference,t=L(m);if(!t)return"toJSON"in s?s.toJSON():s;const e=R(m)?102100:4326,x=g[e].maxX,n=g[e].minX,l=g[e].plus180Line,f=g[e].minus180Line;let o;const a="toJSON"in s?s.toJSON():s;if(X(a))o=j(a,x,n);else if(w(a))a.points=a.points.map(c=>j(c,x,n)),o=a;else if(Q(a))o=C(a,t);else if(T(a)||k(a)){const c=F;q(c,a);const r={xmin:c[0],ymin:c[1],xmax:c[2],ymax:c[3]},u=h(r.xmin,n)*(2*x),y=u===0?a:B(a,u);r.xmin+=u,r.xmax+=u,P(r,l)&&r.xmax!==x||P(r,f)&&r.xmin!==n?i=y:o=y}else o=a;return i!==null?new E().cut(i,x):o}function B(s,i){const m=z(s);for(const t of m)for(const e of t)e[0]+=i;return s}function C(s,i){if(!i)return s;const m=D(s,i).map(t=>t.extent);return m.length<2?m[0]||s:m.length>2?(s.xmin=i.valid[0],s.xmax=i.valid[1],s):{rings:m.map(t=>[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]])}}function j(s,i,m){if(Array.isArray(s)){const t=s[0];if(t>i){const e=h(t,i);s[0]=t+e*(-2*i)}else if(t<m){const e=h(t,m);s[0]=t+e*(-2*m)}}else{const t=s.x;if(t>i){const e=h(t,i);s.x+=e*(-2*i)}else if(t<m){const e=h(t,m);s.x+=e*(-2*m)}}return s}function D(s,i){const m=[],{ymin:t,ymax:e}=s,x=s.xmax-s.xmin,n=s.xmin,l=s.xmax;let f;const[o,a]=i.valid;f=$(s.xmin,i);const c=f.x,r=f.frameId;f=$(s.xmax,i);const u=f.x,y=f.frameId,b=c===u&&x>0;if(x>2*a){const v={xmin:n<l?c:u,ymin:t,xmax:a,ymax:e},J={xmin:o,ymin:t,xmax:n<l?u:c,ymax:e},M={xmin:0,ymin:t,xmax:a,ymax:e},N={xmin:o,ymin:t,xmax:0,ymax:e},p=[],d=[];S(v,M)&&p.push(r),S(v,N)&&d.push(r),S(J,M)&&p.push(y),S(J,N)&&d.push(y);for(let I=r+1;I<y;I++)p.push(I),d.push(I);m.push({extent:v,frameIds:[r]},{extent:J,frameIds:[y]},{extent:M,frameIds:p},{extent:N,frameIds:d})}else c>u||b?m.push({extent:{xmin:c,ymin:t,xmax:a,ymax:e},frameIds:[r]},{extent:{xmin:o,ymin:t,xmax:u,ymax:e},frameIds:[y]}):m.push({extent:{xmin:c,ymin:t,xmax:u,ymax:e},frameIds:[r]});return m}function $(s,i){const[m,t]=i.valid,e=2*t;let x,n=0;return s>t?(x=Math.ceil(Math.abs(s-t)/e),s-=x*e,n=x):s<m&&(x=Math.ceil(Math.abs(s-m)/e),s+=x*e,n=-x),{x:s,frameId:n}}function S(s,i){const{xmin:m,ymin:t,xmax:e,ymax:x}=i;return O(s,m,t)&&O(s,m,x)&&O(s,e,x)&&O(s,e,t)}function O(s,i,m){return i>=s.xmin&&i<=s.xmax&&m>=s.ymin&&m<=s.ymax}class E{cut(i,m){let t;if(i.rings)this.closed=!0,t=i.rings,this.minPts=4;else{if(!i.paths)return null;this.closed=!1,t=i.paths,this.minPts=2}const e=t.length,x=-2*m;for(let n=0;n<e;n++){const l=t[n];if(l&&l.length>=this.minPts){const f=[];for(const o of l)f.push([o[0]+x,o[1]]);t.push(f)}}return this.closed?i.rings=t:i.paths=t,i}}const F=A();export{H as u};
