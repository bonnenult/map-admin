import{cu as b,e6 as w,et as A,eu as g,e7 as X,dU as R,e4 as T,dL as U,dP as k,d$ as q,ev as $,ew as z,ex as h}from"./vendor.70daa49e.js";function H(s){if(!s)return null;let t=null;const i=s.spatialReference,e=w(i);if(!e)return"toJSON"in s?s.toJSON():s;const m=A(i)?102100:4326,x=g[m].maxX,n=g[m].minX,l=g[m].plus180Line,f=g[m].minus180Line;let c;const a="toJSON"in s?s.toJSON():s;if(X(a))c=P(a,x,n);else if(R(a))a.points=a.points.map(r=>P(r,x,n)),c=a;else if(T(a))c=C(a,e);else if(U(a)||k(a)){const r=F;q(r,a);const o={xmin:r[0],ymin:r[1],xmax:r[2],ymax:r[3]},u=h(o.xmin,n)*(2*x),y=u===0?a:B(a,u);o.xmin+=u,o.xmax+=u,$(o,l)&&o.xmax!==x||$(o,f)&&o.xmin!==n?t=y:c=y}else c=a;return t!==null?new E().cut(t,x):c}function B(s,t){const i=z(s);for(const e of i)for(const m of e)m[0]+=t;return s}function C(s,t){if(!t)return s;const i=D(s,t).map(e=>e.extent);return i.length<2?i[0]||s:i.length>2?(s.xmin=t.valid[0],s.xmax=t.valid[1],s):{rings:i.map(e=>[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]])}}function P(s,t,i){if(Array.isArray(s)){const e=s[0];if(e>t){const m=h(e,t);s[0]=e+m*(-2*t)}else if(e<i){const m=h(e,i);s[0]=e+m*(-2*i)}}else{const e=s.x;if(e>t){const m=h(e,t);s.x+=m*(-2*t)}else if(e<i){const m=h(e,i);s.x+=m*(-2*i)}}return s}function D(s,t){const i=[],{ymin:e,ymax:m}=s,x=s.xmax-s.xmin,n=s.xmin,l=s.xmax;let f;const[c,a]=t.valid;f=j(s.xmin,t);const r=f.x,o=f.frameId;f=j(s.xmax,t);const u=f.x,y=f.frameId,L=r===u&&x>0;if(x>2*a){const J={xmin:n<l?r:u,ymin:e,xmax:a,ymax:m},M={xmin:c,ymin:e,xmax:n<l?u:r,ymax:m},N={xmin:0,ymin:e,xmax:a,ymax:m},O={xmin:c,ymin:e,xmax:0,ymax:m},d=[],p=[];v(J,N)&&d.push(o),v(J,O)&&p.push(o),v(M,N)&&d.push(y),v(M,O)&&p.push(y);for(let I=o+1;I<y;I++)d.push(I),p.push(I);i.push({extent:J,frameIds:[o]},{extent:M,frameIds:[y]},{extent:N,frameIds:d},{extent:O,frameIds:p})}else r>u||L?i.push({extent:{xmin:r,ymin:e,xmax:a,ymax:m},frameIds:[o]},{extent:{xmin:c,ymin:e,xmax:u,ymax:m},frameIds:[y]}):i.push({extent:{xmin:r,ymin:e,xmax:u,ymax:m},frameIds:[o]});return i}function j(s,t){const[i,e]=t.valid,m=2*e;let x,n=0;return s>e?(x=Math.ceil(Math.abs(s-e)/m),s-=x*m,n=x):s<i&&(x=Math.ceil(Math.abs(s-i)/m),s+=x*m,n=-x),{x:s,frameId:n}}function v(s,t){const{xmin:i,ymin:e,xmax:m,ymax:x}=t;return S(s,i,e)&&S(s,i,x)&&S(s,m,x)&&S(s,m,e)}function S(s,t,i){return t>=s.xmin&&t<=s.xmax&&i>=s.ymin&&i<=s.ymax}class E{cut(t,i){let e;if(t.rings)this.closed=!0,e=t.rings,this.minPts=4;else{if(!t.paths)return null;this.closed=!1,e=t.paths,this.minPts=2}const m=e.length,x=-2*i;for(let n=0;n<m;n++){const l=e[n];if(l&&l.length>=this.minPts){const f=[];for(const c of l)f.push([c[0]+x,c[1]]);e.push(f)}}return this.closed?t.rings=e:t.paths=e,t}}const F=b();export{H as u};
