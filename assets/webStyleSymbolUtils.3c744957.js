import{f9 as c,fa as p,eY as d,fc as u,op as h,f7 as O,c3 as g,fb as $,fd as N,fe as v,ff as x,fg as S,oq as q,or as w,os as j,f8 as B}from"./vendor.70daa49e.js";function R(e,a,t,s){return e.name?e.styleName&&e.styleName==="Esri2DPointSymbolsStyle"?F(e,a,s):O(e,a,s).then(o=>E(o,e.name,a,t,s)):Promise.reject(new g("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function E(e,a,t,s,o){const f=e.data,b={portal:t&&t.portal||$.getDefault(),url:u(e.baseUrl),origin:"portal-item"},n=f.items.find(r=>r.name===a);if(!n){const r=`The symbol name '${a}' could not be found`;return Promise.reject(new g("symbolstyleutils:symbol-name-not-found",r,{symbolName:a}))}let m=N(v(n,s),b),i=n.thumbnail&&n.thumbnail.href;const y=n.thumbnail&&n.thumbnail.imageData;x()&&(m=S(m),i=S(i));const U={portal:t.portal,url:u(h(m)),origin:"portal-item"};return c(m,o).then(r=>{const D=s==="cimRef"?p(r.data):r.data,l=d(D,U);if(l&&q(l)){if(i){const P=N(i,b);l.thumbnail=new w({url:P})}else y&&(l.thumbnail=new w({url:`data:image/png;base64,${y}`}));e.styleUrl?l.styleOrigin=new j({portal:t.portal,styleUrl:e.styleUrl,name:a}):e.styleName&&(l.styleOrigin=new j({portal:t.portal,styleName:e.styleName,name:a}))}return l})}function F(e,a,t){const s=B.replace(/\{SymbolName\}/gi,e.name);return c(s,t).then(o=>{const f=p(o.data);return d(f,{portal:a.portal,url:u(h(s)),origin:"portal-item"})})}export{E as fetchSymbolFromStyle,R as resolveWebStyleSymbol};
