import{ef as h,eg as p,an as e,cW as w,ij as t,q as c,e as a,d as n,i as y}from"./index.988b09cd.js";import"./vendor.c6be4c00.js";import"./index.25aa0880.js";/* empty css              */import"./qrcode.0911187d.js";/* empty css                 */let i=class extends h(p){constructor(){super(...arguments),this.type="voxel-3d",this._wasmLayerId=-1}initialize(){if(this.view.viewingMode!=="local")throw new e("voxel:unsupported-viewingMode","Voxel layers support local viewingMode only.",{});if(this.view._stage.renderView.renderingContext.webglVersion!=="webgl2")throw new e("voxel:unsupported-context","Voxel layers are supported in WebGL2 rendering contexts only.",{});const o=this.layer.spatialReference;if(!w(o,this.view.spatialReference))throw new e("layerview:spatial-reference-incompatible","The spatial reference of this scene layer is incompatible with the spatial reference of the view",{});const r=t.getInstance(),d=r.addLayer(this.view,this).then(s=>{this._wasmLayerId=s,this._suspendedHandle=c(this,"suspended",l=>{t.getInstance().setLayerEnabled(this.view,this,!l)})}).catch(s=>{if(r.removeLayer(this.view,this),this._wasmLayerId=-1,s===-1)throw new e("voxel:addLayer-failure","The voxel layer description was invalid.",{});if(s===-2)throw new e("voxel:addLayer-failure","The voxel layer web assembly module failed to download.",{})});this.addResolvingPromise(d)}destroy(){t.getInstance().removeLayer(this.view,this),this._suspendedHandle&&(this._suspendedHandle.remove(),this._suspendedHandle=null)}isUpdating(){return!(this._wasmLayerId<0)&&t.getInstance().isUpdating(this.view,this._wasmLayerId)}updatingFlagChanged(){this.notifyChange("updating")}};a([n()],i.prototype,"layer",void 0),a([n({readOnly:!0,aliasOf:"layer.parsedUrl.path"})],i.prototype,"baseUrl",void 0),i=a([y("esri.views.3d.layers.VoxelLayerView3D")],i);const b=i;export{b as default};
