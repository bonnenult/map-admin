import{nu as s,na as g,mw as f,n2 as z,n1 as L,n4 as A,nd as y,nr as N,a8 as b,jU as I,nD as O,nc as l,nx as Z,nw as M,ny as k,aA as $,m$ as E,v as F,mE as B,n0 as H,nt as P,e0 as q,m_ as K,dY as X}from"./index.fe92decb.js";import{c as m,d as x,h as d,l as Y,i as _,j as Q,k as j}from"./arcadeUtils.90e710e7.js";import{disjoint as nn,intersects as tn,touches as en,crosses as rn,within as on,contains as un,overlaps as an,equals as sn,relate as cn,intersect as fn,union as ln,difference as gn,symmetricDifference as dn,clip as hn,cut as wn,planarArea as J,geodesicArea as D,planarLength as S,geodesicLength as v,distance as mn,densify as U,geodesicDensify as W,generalize as pn,buffer as An,geodesicBuffer as yn,offset as En,rotate as C,simplify as G,isSimple as In}from"./geometryEngineAsync.3fd193f9.js";import"./vendor.d9e807b5.js";import"./index.dbbecfd7.js";/* empty css              */import"./qrcode.0911187d.js";/* empty css                 */import"./FeatureSetReader.2f3c5dca.js";import"./centroid.4f152857.js";function T(t){return B.indexOf("4.")===0?F.fromExtent(t):new F({spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]})}function p(t){if(g(t,2,2),!(t[0]instanceof f&&t[1]instanceof f)){if(!(t[0]instanceof f&&t[1]===null)){if(!(t[1]instanceof f&&t[0]===null)){if(t[0]!==null||t[1]!==null)throw new Error("Illegal Argument")}}}}function V(t,r){if(t.type!=="polygon"&&t.type!=="polyline"&&t.type!=="extent")return K(0);let i=1;(t.spatialReference.vcsWkid||t.spatialReference.latestVcsWkid)&&(i=Q(t.spatialReference)/X(t.spatialReference));let u=0;if(t.type==="polyline")for(const n of t.paths)for(let e=1;e<n.length;e++)u+=j(n[e],n[e-1],i);else if(t.type==="polygon")for(const n of t.rings){for(let e=1;e<n.length;e++)u+=j(n[e],n[e-1],i);(n[0][0]!==n[n.length-1][0]||n[0][1]!==n[n.length-1][1]||n[0][2]!==void 0&&n[0][2]!==n[n.length-1][2])&&(u+=j(n[0],n[n.length-1],i))}else t.type==="extent"&&(u+=2*j([t.xmin,t.ymin,0],[t.xmax,t.ymin,0],i),u+=2*j([t.xmin,t.ymin,0],[t.xmin,t.ymax,0],i),u*=2,u+=4*Math.abs(l(t.zmax,0)*i-l(t.zmin,0)*i));const a=new I({hasZ:!1,hasM:!1,spatialReference:t.spatialReference,paths:[[0,0],[0,u]]});return S(a,r)}function kn(t){t.mode==="async"&&(t.functions.disjoint=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){return p(n=s(n)),n[0]===null||n[1]===null||nn(n[0],n[1])})},t.functions.intersects=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){return p(n=s(n)),n[0]!==null&&n[1]!==null&&tn(n[0],n[1])})},t.functions.touches=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){return p(n=s(n)),n[0]!==null&&n[1]!==null&&en(n[0],n[1])})},t.functions.crosses=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){return p(n=s(n)),n[0]!==null&&n[1]!==null&&rn(n[0],n[1])})},t.functions.within=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){return p(n=s(n)),n[0]!==null&&n[1]!==null&&on(n[0],n[1])})},t.functions.contains=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){return p(n=s(n)),n[0]!==null&&n[1]!==null&&un(n[0],n[1])})},t.functions.overlaps=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){return p(n=s(n)),n[0]!==null&&n[1]!==null&&an(n[0],n[1])})},t.functions.equals=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){return g(n,2,2),n[0]===n[1]||(n[0]instanceof f&&n[1]instanceof f?sn(n[0],n[1]):!(!z(n[0])||!z(n[1]))&&n[0].getTime()===n[1].getTime())})},t.functions.relate=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){if(n=s(n),g(n,3,3),n[0]instanceof f&&n[1]instanceof f)return cn(n[0],n[1],L(n[2]));if(n[0]instanceof f&&n[1]===null||n[1]instanceof f&&n[0]===null||n[0]===null&&n[1]===null)return!1;throw new Error("Illegal Argument")})},t.functions.intersection=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){return p(n=s(n)),n[0]===null||n[1]===null?null:fn(n[0],n[1])})},t.functions.union=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){const e=[];if((n=s(n)).length===0)throw new Error("Function called with wrong number of Parameters");if(n.length===1)if(A(n[0])){const o=s(n[0]);for(let c=0;c<o.length;c++)if(o[c]!==null){if(!(o[c]instanceof f))throw new Error("Illegal Argument");e.push(o[c])}}else{if(!y(n[0])){if(n[0]instanceof f)return N(m(n[0]),r.spatialReference);if(n[0]===null)return null;throw new Error("Illegal Argument")}{const o=s(n[0].toArray());for(let c=0;c<o.length;c++)if(o[c]!==null){if(!(o[c]instanceof f))throw new Error("Illegal Argument");e.push(o[c])}}}else for(let o=0;o<n.length;o++)if(n[o]!==null){if(!(n[o]instanceof f))throw new Error("Illegal Argument");e.push(n[o])}return e.length===0?null:ln(e)})},t.functions.difference=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){return p(n=s(n)),n[0]!==null&&n[1]===null?m(n[0]):n[0]===null?null:gn(n[0],n[1])})},t.functions.symmetricdifference=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){return p(n=s(n)),n[0]===null&&n[1]===null?null:n[0]===null?m(n[1]):n[1]===null?m(n[0]):dn(n[0],n[1])})},t.functions.clip=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){if(n=s(n),g(n,2,2),!(n[1]instanceof b)&&n[1]!==null)throw new Error("Illegal Argument");if(n[0]===null)return null;if(!(n[0]instanceof f))throw new Error("Illegal Argument");return n[1]===null?null:hn(n[0],n[1])})},t.functions.cut=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){if(n=s(n),g(n,2,2),!(n[1]instanceof I)&&n[1]!==null)throw new Error("Illegal Argument");if(n[0]===null)return[];if(!(n[0]instanceof f))throw new Error("Illegal Argument");return n[1]===null?[m(n[0])]:wn(n[0],n[1])})},t.functions.area=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){if(g(n,1,2),(n=s(n))[0]===null)return 0;if(O(n[0]))return n[0].sumArea(x(l(n[1],-1)),!1,r.abortSignal).then(e=>{if(r.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e});if(A(n[0])||y(n[0])){const e=Z(n[0],r.spatialReference);return e===null?0:J(e,x(l(n[1],-1)))}if(!(n[0]instanceof f))throw new Error("Illegal Argument");return J(n[0],x(l(n[1],-1)))})},t.functions.areageodetic=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){if(g(n,1,2),(n=s(n))[0]===null)return 0;if(O(n[0]))return n[0].sumArea(x(l(n[1],-1)),!0,r.abortSignal).then(e=>{if(r.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e});if(A(n[0])||y(n[0])){const e=Z(n[0],r.spatialReference);return e===null?0:D(e,x(l(n[1],-1)))}if(!(n[0]instanceof f))throw new Error("Illegal Argument");return D(n[0],x(l(n[1],-1)))})},t.functions.length=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){if(g(n,1,2),(n=s(n))[0]===null)return 0;if(O(n[0]))return n[0].sumLength(d(l(n[1],-1)),!1,r.abortSignal).then(e=>{if(r.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e});if(A(n[0])||y(n[0])){const e=M(n[0],r.spatialReference);return e===null?0:S(e,d(l(n[1],-1)))}if(!(n[0]instanceof f))throw new Error("Illegal Argument");return S(n[0],d(l(n[1],-1)))})},t.functions.length3d=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){if(g(n,1,2),(n=s(n))[0]===null)return 0;if(A(n[0])||y(n[0])){const e=M(n[0],r.spatialReference);return e===null?0:e.hasZ===!0?V(e,d(l(n[1],-1))):S(e,d(l(n[1],-1)))}if(!(n[0]instanceof f))throw new Error("Illegal Argument");return n[0].hasZ===!0?V(n[0],d(l(n[1],-1))):S(n[0],d(l(n[1],-1)))})},t.functions.lengthgeodetic=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){if(g(n,1,2),(n=s(n))[0]===null)return 0;if(O(n[0]))return n[0].sumLength(d(l(n[1],-1)),!0,r.abortSignal).then(e=>{if(r.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e});if(A(n[0])||y(n[0])){const e=M(n[0],r.spatialReference);return e===null?0:v(e,d(l(n[1],-1)))}if(!(n[0]instanceof f))throw new Error("Illegal Argument");return v(n[0],d(l(n[1],-1)))})},t.functions.distance=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){n=s(n),g(n,2,3);let e=n[0];(A(n[0])||y(n[0]))&&(e=k(n[0],r.spatialReference));let o=n[1];if((A(n[1])||y(n[1]))&&(o=k(n[1],r.spatialReference)),!(e instanceof f))throw new Error("Illegal Argument");if(!(o instanceof f))throw new Error("Illegal Argument");return mn(e,o,d(l(n[2],-1)))})},t.functions.distancegeodetic=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){n=s(n),g(n,2,3);const e=n[0],o=n[1];if(!(e instanceof $))throw new Error("Illegal Argument");if(!(o instanceof $))throw new Error("Illegal Argument");const c=new I({paths:[],spatialReference:e.spatialReference});return c.addPath([e,o]),v(c,d(l(n[2],-1)))})},t.functions.densify=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){if(n=s(n),g(n,2,3),n[0]===null)return null;if(!(n[0]instanceof f))throw new Error("Illegal Argument");const e=E(n[1]);if(isNaN(e))throw new Error("Illegal Argument");if(e<=0)throw new Error("Illegal Argument");return n[0]instanceof F||n[0]instanceof I?U(n[0],e,d(l(n[2],-1))):n[0]instanceof b?U(T(n[0]),e,d(l(n[2],-1))):n[0]})},t.functions.densifygeodetic=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){if(n=s(n),g(n,2,3),n[0]===null)return null;if(!(n[0]instanceof f))throw new Error("Illegal Argument");const e=E(n[1]);if(isNaN(e))throw new Error("Illegal Argument");if(e<=0)throw new Error("Illegal Argument");return n[0]instanceof F||n[0]instanceof I?W(n[0],e,d(l(n[2],-1))):n[0]instanceof b?W(T(n[0]),e,d(l(n[2],-1))):n[0]})},t.functions.generalize=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){if(n=s(n),g(n,2,4),n[0]===null)return null;if(!(n[0]instanceof f))throw new Error("Illegal Argument");const e=E(n[1]);if(isNaN(e))throw new Error("Illegal Argument");return pn(n[0],e,H(l(n[2],!0)),d(l(n[3],-1)))})},t.functions.buffer=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){if(n=s(n),g(n,2,3),n[0]===null)return null;if(!(n[0]instanceof f))throw new Error("Illegal Argument");const e=E(n[1]);if(isNaN(e))throw new Error("Illegal Argument");return e===0?m(n[0]):An(n[0],e,d(l(n[2],-1)))})},t.functions.buffergeodetic=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){if(n=s(n),g(n,2,3),n[0]===null)return null;if(!(n[0]instanceof f))throw new Error("Illegal Argument");const e=E(n[1]);if(isNaN(e))throw new Error("Illegal Argument");return e===0?m(n[0]):yn(n[0],e,d(l(n[2],-1)))})},t.functions.offset=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){if(n=s(n),g(n,2,6),n[0]===null)return null;if(!(n[0]instanceof F||n[0]instanceof I))throw new Error("Illegal Argument");const e=E(n[1]);if(isNaN(e))throw new Error("Illegal Argument");const o=E(l(n[4],10));if(isNaN(o))throw new Error("Illegal Argument");const c=E(l(n[5],0));if(isNaN(c))throw new Error("Illegal Argument");return En(n[0],e,d(l(n[2],-1)),L(l(n[3],"round")).toLowerCase(),o,c)})},t.functions.rotate=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){n=s(n),g(n,2,3);let e=n[0];if(e===null)return null;if(!(e instanceof f))throw new Error("Illegal Argument");e instanceof b&&(e=F.fromExtent(e));const o=E(n[1]);if(isNaN(o))throw new Error("Illegal Argument");const c=l(n[2],null);if(c===null)return C(e,o);if(c instanceof $)return C(e,o,c);throw new Error("Illegal Argument")})},t.functions.centroid=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){if(n=s(n),g(n,1,1),n[0]===null)return null;let e=n[0];if((A(n[0])||y(n[0]))&&(e=k(n[0],r.spatialReference)),e===null)return null;if(!(e instanceof f))throw new Error("Illegal Argument");return e instanceof $?N(m(n[0]),r.spatialReference):e instanceof F?e.centroid:e instanceof I?Y(e):e instanceof P?_(e):e instanceof b?e.center:null})},t.functions.multiparttosinglepart=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){n=s(n),g(n,1,1);const e=[];if(n[0]===null)return null;if(!(n[0]instanceof f))throw new Error("Illegal Argument");return n[0]instanceof $?[N(m(n[0]),r.spatialReference)]:n[0]instanceof b?[N(m(n[0]),r.spatialReference)]:G(n[0]).then(o=>{if(o instanceof F){const c=[],w=[];for(let h=0;h<o.rings.length;h++)if(o.isClockwise(o.rings[h])){const R=q({rings:[o.rings[h]],hasZ:o.hasZ===!0,hazM:o.hasM===!0,spatialReference:o.spatialReference.toJSON()});c.push(R)}else w.push({ring:o.rings[h],pt:o.getPoint(h,0)});for(let h=0;h<w.length;h++)for(let R=0;R<c.length;R++)if(c[R].contains(w[h].pt)){c[R].addRing(w[h].ring);break}return c}if(o instanceof I){const c=[];for(let w=0;w<o.paths.length;w++){const h=q({paths:[o.paths[w]],hasZ:o.hasZ===!0,hazM:o.hasM===!0,spatialReference:o.spatialReference.toJSON()});c.push(h)}return c}if(n[0]instanceof P){const c=N(m(n[0]),r.spatialReference);for(let w=0;w<c.points.length;w++)e.push(c.getPoint(w));return e}return null})})},t.functions.issimple=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){if(n=s(n),g(n,1,1),n[0]===null)return!0;if(!(n[0]instanceof f))throw new Error("Illegal Argument");return In(n[0])})},t.functions.simplify=function(r,i){return t.standardFunctionAsync(r,i,function(u,a,n){if(n=s(n),g(n,1,1),n[0]===null)return null;if(!(n[0]instanceof f))throw new Error("Illegal Argument");return G(n[0])})})}export{kn as registerFunctions};
