var N=Object.defineProperty,q=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var h=(r,e,a)=>e in r?N(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,d=(r,e)=>{for(var a in e||(e={}))J.call(e,a)&&h(r,a,e[a]);if(A)for(var a of A(e))O.call(e,a)&&h(r,a,e[a]);return r},g=(r,e)=>q(r,I(e));import{e as t,d as o,aA as S,f6 as p,jU as F,v as M,h as v,i as $,eb as Z,kZ as z,r as C,e0 as E,cn as G,aI as K,kz as Q,gA as T,bb as U,kA as V}from"./index.fe92decb.js";import{a as D,u as f,d as H,b as L,p as W,o as X}from"./networkService.70987b51.js";import"./vendor.d9e807b5.js";import"./index.dbbecfd7.js";/* empty css              */import"./qrcode.0911187d.js";/* empty css                 */import"./GPMessage.0a6a4e5f.js";function j(r){return r.features.map(e=>{const a=G.fromJSON(r.spatialReference),n=v.fromJSON(e);return K(n.geometry).spatialReference=a,n})}function m(r){return z(r.features.map(e=>(C(e.geometry)&&(e.geometry.spatialReference=r.spatialReference),E(e.geometry))))}let s=class extends Z{constructor(r){super(r),this.facilities=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.serviceAreaPolylines=null,this.serviceAreaPolygons=null}readFacilities(r){return m(r)}readPointBarriers(r,e){return m(e.barriers)}readPolylineBarriers(r){return m(r)}readPolygonBarriers(r){return m(r)}readIncidents(r,e){return j(e.saPolylines)}readServiceAreaPolygons(r,e){return j(e.saPolygons)}};t([o({type:[S]})],s.prototype,"facilities",void 0),t([p("facilities")],s.prototype,"readFacilities",null),t([o({type:[D]})],s.prototype,"messages",void 0),t([o({type:[S]})],s.prototype,"pointBarriers",void 0),t([p("pointBarriers",["barriers"])],s.prototype,"readPointBarriers",null),t([o({type:[F]})],s.prototype,"polylineBarriers",void 0),t([p("polylineBarriers")],s.prototype,"readPolylineBarriers",null),t([o({type:[M]})],s.prototype,"polygonBarriers",void 0),t([p("polygonBarriers")],s.prototype,"readPolygonBarriers",null),t([o({type:[v]})],s.prototype,"serviceAreaPolylines",void 0),t([p("serviceAreaPolylines",["saPolylines"])],s.prototype,"readIncidents",null),t([o({type:[v]})],s.prototype,"serviceAreaPolygons",void 0),t([p("serviceAreaPolygons",["saPolygons"])],s.prototype,"readServiceAreaPolygons",null),s=t([$("esri.rest.support.ServiceAreaSolveResult")],s);const Y=s,_=X({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:"outSR",getter:r=>r.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},travelMode:!0});async function ee(r,e,a){const n=[],u=[],l={},c={},P=Q(r),{path:b}=P;e.facilities&&e.facilities.features&&f(e.facilities.features,u,"facilities.features",l),e.pointBarriers&&e.pointBarriers.features&&f(e.pointBarriers.features,u,"pointBarriers.features",l),e.polylineBarriers&&e.polylineBarriers.features&&f(e.polylineBarriers.features,u,"polylineBarriers.features",l),e.polygonBarriers&&e.polygonBarriers.features&&f(e.polygonBarriers.features,u,"polygonBarriers.features",l);const k=await T(u);for(const i in l){const y=l[i];n.push(i),c[i]=k.slice(y[0],y[1])}if(H(c,n)){let i=null;try{i=await L(b,e.apiKey,a)}catch{}i&&!i.hasZ&&W(c,n)}for(const i in c)c[i].forEach((y,w)=>{e.get(i)[w].geometry=y});const R=g(d({},a),{query:g(d(d({},P.query),_.toQueryParams(e)),{f:"json"})}),{data:x}=await U(`${b}/solveServiceArea`,R);return Y.fromJSON(x)}let B=class extends V{constructor(r){super(r),this.url=null}solve(r,e){return ee(this.url,r,e)}};t([o()],B.prototype,"url",void 0),B=t([$("esri.tasks.ServiceAreaTask")],B);const ue=B;export{ue as default};
