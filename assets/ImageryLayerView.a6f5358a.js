import{aX as r,aY as p,iT as g,aZ as E,c4 as l,b0 as c,bc as b,aq as m}from"./vendor.c8f3cc8c.js";import{d as x}from"./popupUtils.37c6f82e.js";const q=d=>{let e=class extends d{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(t,n){const{layer:a}=this;if(!t)throw new l("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:a});const{popupEnabled:u}=a,i=x(a,n);if(!u||!c(i))throw new l("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:u,popupTemplate:i});const w=await i.getRequiredFields(),s=new b;s.timeExtent=this.timeExtent,s.geometry=t,s.outFields=w,s.outSpatialReference=t.spatialReference;const o=this.view.resolution,h=this.view.type==="2d"?new m(o,o,this.view.spatialReference):new m(.5*o,.5*o,this.view.spatialReference),{returnTopmostRaster:y,showNoDataRecords:v}=i.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},f={returnDomainValues:!0,returnTopmostRaster:y,pixelSize:h,showNoDataRecords:v,signal:c(n)?n.signal:null};return a.queryVisibleRasters(s,f).then(R=>R)}canResume(){var t;return!!super.canResume()&&((t=this.timeExtent)==null||!t.isEmpty)}};return r([p()],e.prototype,"layer",void 0),r([p()],e.prototype,"suspended",void 0),r([p(g)],e.prototype,"timeExtent",void 0),r([p()],e.prototype,"view",void 0),e=r([E("esri.views.layers.ImageryLayerView")],e),e};export{q as u};
