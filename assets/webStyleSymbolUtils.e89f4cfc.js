import{fb as y,fc as p,e_ as h,fe as u,or as d,f9 as O,c5 as g,fd as $,ff as N,fg as v,fh as x,fi as S,os as B,ot as w,ou as j,fa as E}from"./vendor.47ccae81.js";function T(e,t,a,s){return e.name?e.styleName&&e.styleName==="Esri2DPointSymbolsStyle"?M(e,t,s):O(e,t,s).then(o=>F(o,e.name,t,a,s)):Promise.reject(new g("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function F(e,t,a,s,o){const f=e.data,b={portal:a&&a.portal||$.getDefault(),url:u(e.baseUrl),origin:"portal-item"},n=f.items.find(r=>r.name===t);if(!n){const r=`The symbol name '${t}' could not be found`;return Promise.reject(new g("symbolstyleutils:symbol-name-not-found",r,{symbolName:t}))}let m=N(v(n,s),b),i=n.thumbnail&&n.thumbnail.href;const c=n.thumbnail&&n.thumbnail.imageData;x()&&(m=S(m),i=S(i));const U={portal:a.portal,url:u(d(m)),origin:"portal-item"};return y(m,o).then(r=>{const D=s==="cimRef"?p(r.data):r.data,l=h(D,U);if(l&&B(l)){if(i){const P=N(i,b);l.thumbnail=new w({url:P})}else c&&(l.thumbnail=new w({url:`data:image/png;base64,${c}`}));e.styleUrl?l.styleOrigin=new j({portal:a.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(l.styleOrigin=new j({portal:a.portal,styleName:e.styleName,name:t}))}return l})}function M(e,t,a){const s=E.replace(/\{SymbolName\}/gi,e.name);return y(s,a).then(o=>{const f=p(o.data);return h(f,{portal:t.portal,url:u(d(s)),origin:"portal-item"})})}export{F as fetchSymbolFromStyle,T as resolveWebStyleSymbol};
