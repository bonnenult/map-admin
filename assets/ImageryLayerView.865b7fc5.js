import{e as r,d as p,hb as g,i as x,an as l,r as c,k as E,aA as d}from"./index.fe92decb.js";import{d as b}from"./popupUtils.16f9871e.js";const D=m=>{let e=class extends m{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(t,n){const{layer:i}=this;if(!t)throw new l("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:i});const{popupEnabled:u}=i,o=b(i,n);if(!u||!c(o))throw new l("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:u,popupTemplate:o});const w=await o.getRequiredFields(),s=new E;s.timeExtent=this.timeExtent,s.geometry=t,s.outFields=w,s.outSpatialReference=t.spatialReference;const a=this.view.resolution,h=this.view.type==="2d"?new d(a,a,this.view.spatialReference):new d(.5*a,.5*a,this.view.spatialReference),{returnTopmostRaster:y,showNoDataRecords:f}=o.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},v={returnDomainValues:!0,returnTopmostRaster:y,pixelSize:h,showNoDataRecords:f,signal:c(n)?n.signal:null};return i.queryVisibleRasters(s,v).then(R=>R)}canResume(){var t;return!!super.canResume()&&((t=this.timeExtent)==null||!t.isEmpty)}};return r([p()],e.prototype,"layer",void 0),r([p()],e.prototype,"suspended",void 0),r([p(g)],e.prototype,"timeExtent",void 0),r([p()],e.prototype,"view",void 0),e=r([x("esri.views.layers.ImageryLayerView")],e),e};export{D as u};
