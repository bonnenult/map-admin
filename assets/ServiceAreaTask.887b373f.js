var O=Object.defineProperty,q=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var S=(r,e,t)=>e in r?O(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,d=(r,e)=>{for(var t in e||(e={}))I.call(e,t)&&S(r,t,e[t]);if(A)for(var t of A(e))J.call(e,t)&&S(r,t,e[t]);return r},g=(r,e)=>q(r,x(e));import{aY as a,aZ as o,aq as $,gO as p,ly as F,aX as M,as as v,a_ as b,fT as T,mD as Z,b1 as C,fI as D,ar as E,cp as G,md as K,ig as Q,cU as U,me as V}from"./vendor.47ccae81.js";import{a as X,u as B,d as Y,b as _,p as z,o as H}from"./networkService.3338507d.js";import"./GPMessage.38a42736.js";function R(r){return r.features.map(e=>{const t=E.fromJSON(r.spatialReference),l=v.fromJSON(e);return G(l.geometry).spatialReference=t,l})}function m(r){return Z(r.features.map(e=>(C(e.geometry)&&(e.geometry.spatialReference=r.spatialReference),D(e.geometry))))}let s=class extends T{constructor(r){super(r),this.facilities=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.serviceAreaPolylines=null,this.serviceAreaPolygons=null}readFacilities(r){return m(r)}readPointBarriers(r,e){return m(e.barriers)}readPolylineBarriers(r){return m(r)}readPolygonBarriers(r){return m(r)}readIncidents(r,e){return R(e.saPolylines)}readServiceAreaPolygons(r,e){return R(e.saPolygons)}};a([o({type:[$]})],s.prototype,"facilities",void 0),a([p("facilities")],s.prototype,"readFacilities",null),a([o({type:[X]})],s.prototype,"messages",void 0),a([o({type:[$]})],s.prototype,"pointBarriers",void 0),a([p("pointBarriers",["barriers"])],s.prototype,"readPointBarriers",null),a([o({type:[F]})],s.prototype,"polylineBarriers",void 0),a([p("polylineBarriers")],s.prototype,"readPolylineBarriers",null),a([o({type:[M]})],s.prototype,"polygonBarriers",void 0),a([p("polygonBarriers")],s.prototype,"readPolygonBarriers",null),a([o({type:[v]})],s.prototype,"serviceAreaPolylines",void 0),a([p("serviceAreaPolylines",["saPolylines"])],s.prototype,"readIncidents",null),a([o({type:[v]})],s.prototype,"serviceAreaPolygons",void 0),a([p("serviceAreaPolygons",["saPolygons"])],s.prototype,"readServiceAreaPolygons",null),s=a([b("esri.rest.support.ServiceAreaSolveResult")],s);const L=s,W=H({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,defaultBreaks:!0,facilities:!0,outSpatialReference:{name:"outSR",getter:r=>r.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},travelMode:!0});async function ee(r,e,t){const l=[],u=[],n={},c={},P=K(r),{path:h}=P;e.facilities&&e.facilities.features&&B(e.facilities.features,u,"facilities.features",n),e.pointBarriers&&e.pointBarriers.features&&B(e.pointBarriers.features,u,"pointBarriers.features",n),e.polylineBarriers&&e.polylineBarriers.features&&B(e.polylineBarriers.features,u,"polylineBarriers.features",n),e.polygonBarriers&&e.polygonBarriers.features&&B(e.polygonBarriers.features,u,"polygonBarriers.features",n);const j=await Q(u);for(const i in n){const y=n[i];l.push(i),c[i]=j.slice(y[0],y[1])}if(Y(c,l)){let i=null;try{i=await _(h,e.apiKey,t)}catch{}i&&!i.hasZ&&z(c,l)}for(const i in c)c[i].forEach((y,N)=>{e.get(i)[N].geometry=y});const k=g(d({},t),{query:g(d(d({},P.query),W.toQueryParams(e)),{f:"json"})}),{data:w}=await U(`${h}/solveServiceArea`,k);return L.fromJSON(w)}let f=class extends V{constructor(r){super(r),this.url=null}solve(r,e){return ee(this.url,r,e)}};a([o()],f.prototype,"url",void 0),f=a([b("esri.tasks.ServiceAreaTask")],f);const ie=f;export{ie as default};
