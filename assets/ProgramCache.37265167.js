import{t as o}from"./programUtils.44a18329.js";class g{constructor(r){this._programCacheByTemplate=new Map,this._rctx=r}dispose(){this._programCacheByTemplate.forEach(r=>r.programs.forEach(a=>a.dispose())),this._programCacheByTemplate=null}getProgram(r,a){return this._programCacheByTemplate.has(r)||this.addProgramTemplate(r,t=>o(this._rctx,r,t)),this.getProgramTemplateInstance(r,a)}addProgramTemplate(r,a){this._programCacheByTemplate.set(r,{constructor:a,programs:new Map})}getProgramTemplateInstance(r,a){const t=this._programCacheByTemplate.get(r);if(t){const e=a?JSON.stringify(a):"default";if(!t.programs.has(e)){const s=t.constructor(a);t.programs.set(e,s)}return t.programs.get(e)}return null}}export{g as t};
